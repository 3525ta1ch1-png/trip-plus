{% extends "base.html" %}

{% block title %}ワード検索 | TRIP+{% endblock %}
{% block header_title %}ワード検索{% endblock %}

{% block content %}
  <h1 style="margin: 0 0 14px;">ワード検索</h1>

  <form method="get" style="display: grid; gap: 12px; max-width: 560px;">
    <div>
      <span class="muted">{{ form.mood.label }}</span>
      {{ form.mood }}
    </div>

    <div>
      <span class="muted">{{ form.purpose.label }}</span>
      {{ form.purpose }}
    </div>

    <div>
      <span class="muted">{{ form.start_at.label }}</span>
      {{ form.start_at }}
    </div>

    <div>
      <span class="muted">{{ form.end_at.label }}</span>
      {{ form.end_at }}
    </div>

    <div>
      <span class="muted">{{ form.language.label }}</span>
      {{ form.language }}
    </div>

    <button type="submit" class="btn">検索</button>
  </form>

  <hr style="margin: 22px 0; border: none; border-top: 1px solid #e7e7e7;">

  <h2 style="margin: 0 0 10px;">結果</h2>

 <div class="wrap">
  {% if spots %}
    {% for s in spots %}
      <div class="card">
        <div class="row">
          <div class="title">
            <a href="{% url 'spots:spot_detail' s.pk %}">{{ s.name }}</a>
          </div>

          {% if user.is_authenticated %}
            <form method="post" action="{% url 'spots:favorite_toggle' s.pk %}">
              {% csrf_token %}
              <button class="btn btn-sub" type="submit">♡/☆</button>
            </form>
          {% endif %}
        </div>

        <div class="muted">住所：{{ s.address }}</div>

        {% if s.language %}
          <div class="muted">言語：{{ s.language }}</div>
        {% endif %}

        {% if s.image %}
          <div style="margin-top:10px;">
            <img src="{{ s.image.url }}" alt="{{ s.name }}"
                 style="width:100%; height:180px; object-fit:cover; border-radius:14px;">
          </div>
        {% endif %}
      </div>
    {% endfor %}
  {% else %}
    <div class="card">
      <p>該当スポットがありません</p>
    </div>
  {% endif %}
</div>
